<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.happyjob.study.std.dao.TaskSendDao">
	
	<!-- 강의 목록  -->
	<select id="lectureList" resultType="kr.happyjob.study.std.model.CourseInfoModel">
	
       /*kr.happyjob.study.std.dao.TaskSendDao.lectureListCnt*/     
       		
			select  sd.lecture_seq  as lectureSeq
			      , sd.loginID
			      , ui.name as teacherName
			      , dc.detail_name as lectureName
			      , le.lecture_start as lectureStart
			      , le.lecture_end as lectureEnd
			  from tb_student sd 
			       inner join tb_lecture le on le.lecture_seq = sd.lecture_seq
			       inner join tb_detail_code dc on le.lecture_no = dc.detail_code
			       inner join tb_userinfo ui on le.loginID = ui.loginID
			where sd.loginID = #{loginid}
		   LIMIT #{startNum}, #{pageSize}
	</select>
	
	
	<!-- 강의 목록 카운트 -->
    <select id="lectureListCnt" resultType="int">
     
      /*kr.happyjob.study.std.dao.TaskSendDao.lectureListCnt*/      
      
	      select	count(*)
		  	from	tb_student sd 
	          		inner join tb_lecture le on le.lecture_seq = sd.lecture_seq
	       			inner join tb_detail_code dc on dc.group_code = 'lecture_no' and dc.detail_code = le.lecture_no
	      where sd.loginID = #{loginid}
	      
    </select>
	
	
	<!-- 강의계획서 목록 조회 -->
	<select id="taskList" resultType="kr.happyjob.study.std.model.TaskListModel">
	  /* kr.happyjob.study.tut.dao.TaskDao.taskList */
         
          select pn.lecture_seq
                ,pn.plan_week
                ,ts.task_no
                ,ts.task_title
                ,ts.task_start
                ,ts.task_end
                ,ts.plan_no
                ,dc.detail_name as lectureName
	      from tb_plan pn
	           inner join tb_task ts on ts.plan_no = pn.plan_no
	           inner join tb_lecture le on le.lecture_seq = pn.lecture_seq
	           inner join tb_detail_code dc on dc.group_code = 'lecture_no' and dc.detail_code = le.lecture_no
         where  pn.lecture_seq = #{lectureSeq}
    </select>     
    
    <select id="taskListCnt" resultType="int">
		/* kr.happyjob.study.tut.dao.TaskDao.taskListCnt */
		
		select count(*)
		 from tb_plan pn	
	    where lecture_seq = #{lectureSeq}
	</select>
    
	<!-- 과제 내용 조회 -->
	<select id="taskContent" resultType="kr.happyjob.study.std.model.TaskModel">
	  /* kr.happyjob.study.std.dao.TaskDao.taskContent */
		  select plan_no as planNo
	            ,task_no as taskNo
	            ,task_title as taskTitle
	            ,task_content as taskContent
	            ,task_start as taskStart
	            ,task_end as taskEnd
	            ,task_name as taskName
	            ,task_non as  taskNon
	            ,task_mul as taskMul
	        from tb_task
	      where plan_no = #{planNo}
	</select>
</mapper>