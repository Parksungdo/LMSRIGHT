<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.happyjob.study.std.dao.LectureListDAO">

   <!-- 강의 목록 조회 -->
   <select id="lectureListSearch" resultType="kr.happyjob.study.std.model.LectureListModel">
      /*kr.happyjob.study.std.dao.LectureListDAO.lectureListSearch*/      
      SELECT	lc.lecture_no
                  , lc.loginID
                  , dc.detail_name as lecture_name
                  , ui.name as teacher_name
                  , lc.lecture_person
                  , lc.lecture_total
                  , lc.lecture_goal
                  , lc.lecture_start
                  , lc.lecture_end
                  , lc.lecture_confirm
	  	FROM	tb_lecture lc
          		inner join tb_detail_code dc on dc.group_code = 'lecture_no' and dc.detail_code = lc.lecture_no
          		inner join tb_userinfo ui on lc.loginID = ui.loginID
      <where>
				<!-- <if test="(lectureNo != null) and (!lectureNo.equals(''))">
				      and lc.lecture_no = #{lectureNo}
				</if> -->
				
				<if test="(searchWord != null) and (!searchWord.equals(''))">
				      and lecture_name LIKE CONCAT('%', #{searchWord}, '%')      	
				</if>
				
	  </where>
       ORDER BY lecture_no DESC
       LIMIT #{startnum}, #{pageSize}
   </select>
   
   <!-- 강의 목록 총 갯수 조회 -->
   <select id="lectureListCnt" resultType="int">
      /*kr.happyjob.study.std.dao.LectureListDAO.lectureListCnt*/      
      SELECT	count(*)
	  	FROM	tb_lecture lc
          		inner join tb_detail_code dc on dc.group_code = 'lecture_no' and dc.detail_code = lc.lecture_no
      <where>
				<!-- <if test="(lectureNo != null) and (!lectureNo.equals(''))">
				      and lc.lecture_no = #{lectureNo}
				</if> -->
				
				<if test="(searchWord != null) and (!searchWord.equals(''))">
				      and lecture_name LIKE CONCAT('%', #{searchWord}, '%')      	
				</if>
				
	  </where> 
   </select>
   
   <!-- 강의 목록 한개 조회 -->
   <select id="lectureSelect" resultType="kr.happyjob.study.std.model.LectureListModel">
      /*kr.happyjob.study.std.dao.LectureListDAO.lectureSelect*/      
       SELECT	lc.lecture_no
                  , lc.loginID
                  , dc.detail_name as lecture_name
                  , ui.name as teacher_name
                  , lc.lecture_person
                  , lc.lecture_total
                  , lc.lecture_goal
                  , lc.lecture_start
                  , lc.lecture_end
                  , lc.lecture_confirm
	  	FROM	tb_lecture lc
          		inner join tb_detail_code dc on dc.group_code = 'lecture_no' and dc.detail_code = lc.lecture_no
          		inner join tb_userinfo ui on lc.loginID = ui.loginID
        WHERE   lc.lecture_no = #{lectureNo}
        AND		lc.loginID = #{loginID}
   </select>
   
</mapper>