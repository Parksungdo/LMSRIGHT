<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.happyjob.study.adm.dao.TeacherListDao">

	<!-- 강사 목록 조회 -->
	<select id="teacherList" resultType="kr.happyjob.study.adm.model.TeacherListModel">
		select   loginID
		       , user_type
		       , name
		       , user_hp
		       , user_email
		       , user_regdate
		  from tb_userinfo 
	    where user_type = 'B' or user_type = 'D'
	     <if test = "(search != null) and (!search.equals(''))">
			 and name LIKE CONCAT('%', #{search}, '%')      	
	     </if>
	    limit #{startNum}, #{pageSize}
	</select>
	
	<!-- 강사 목록 수 -->
	<select id="listCnt" resultType="int">
		/*kr.happyjob.study.adm.dao.TeacherListDao.listCnt*/
		select  count(*)
 		 from tb_userinfo
	    where user_type = 'B' or user_type = 'D'
	     <if test = "(search != null) and (!search.equals(''))">
			 and name LIKE CONCAT('%', #{search}, '%')      	
	     </if>
	</select>
	
	<!-- 유저타입 업데이트 -->
	<update id="tutupdate">
		update tb_userinfo
			set user_type = #{userType}
		  where loginID = #{loginID}
	</update>
</mapper>