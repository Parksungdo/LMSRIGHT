<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.happyjob.study.adm.dao.CounselHistoryDao">


	<!-- 수업 목록 조회 -->
	<select id="counselLectureList" resultType="kr.happyjob.study.adm.model.LectureModel">
		/*kr.happyjob.study.adm.dao.CounselHistoryDao.LectureModel*/
		
		select le.lecture_no as lectureNo
			   ,le.loginID as loginId
			   ,le.lecture_start as lectureStart
			   ,le.lecture_end as lectureEnd
	           ,dc.detail_name as lectureName
		  from tb_lecture le 
          	  inner join tb_detail_code dc on dc.group_code = 'lecture_no' and dc.detail_code = le.lecture_no
		limit #{startNum}, #{pageSize}
	</select>
	
	<!-- 수업  목록 수 -->
	<select id="lectureListCnt" resultType="int">
		/*kr.happyjob.study.adm.dao.CounselHistoryDao.lectureListCnt*/
		select  count(*)
 		 from tb_lecture 
	</select>
	
	
	<!-- 상담 목록 조회 -->
	<select id="counselList" resultType="kr.happyjob.study.adm.model.CounselHistoryModel">
		select co.consultant_no
		      ,co.loginID
		      ,co.lecture_name
		      ,co.consultant_name
		      ,co.consultant_counsel
		      ,co.consultant_date  
		      ,us.name as admin_name
		  from consultant co
		    inner join tb_userinfo us on us.loginID = co.loginID 
		where co.lecture_name = #{lectureName}
 		limit #{startNum}, #{pageSize} 
	</select>
	
	<!-- 상담 목록 수-->
	<select id="counselCnt" resultType="int">
		/*kr.happyjob.study.adm.dao.CounselHistoryDao.counselCnt*/
		select  count(*)
 		 from consultant
 		where lecture_name = #{lectureName}
	</select>
	
	
	<!-- 상담 상세 조회 -->	
	<select id="counselSelect" resultType="kr.happyjob.study.adm.model.CounselHistoryModel">
	    select co.consultant_no
	          ,co.lecture_name
			  ,co.consultant_name
			  ,co.consultant_counsel
	          ,consultant_content
			  ,co.consultant_date  
			  ,us.name
	     from consultant co
			  inner join tb_userinfo us on us.loginID = co.loginID 
	    where co.consultant_no = #{consultantNo}
	</select>
	
	
</mapper>